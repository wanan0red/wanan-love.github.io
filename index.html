<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>wanan</title><meta name="author" content="wanan"><meta name="copyright" content="wanan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="wanan">
<meta property="og:url" content="https://www.wanan.red/index.html">
<meta property="og:site_name" content="wanan">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/img/202203092159138.jpeg">
<meta property="article:author" content="wanan">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/img/202203092159138.jpeg"><link rel="shortcut icon" href="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/img/202203092159138.jpeg"><link rel="canonical" href="https://www.wanan.red/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="Lkrie_55AalLqll4AtBs-NEomlv8QQYHGMx1V0cbq88"/><meta name="baidu-site-verification" content="code-e6YD56vlMd"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?882501b6f459073168e4d14d5e29d5e2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-FYB0HL88QE"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-FYB0HL88QE');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'wanan',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-11-08 18:09:24'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/img/202203092159138.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">73</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">56</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">wanan</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">wanan</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/%E5%85%B6%E4%BB%96/osql&amp;Intranet!/" title="osql&amp;Intranet!"><img class="post_bg" src="https://cdn.pixabay.com/photo/2016/10/18/21/28/seljalandsfoss-1751463_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="osql&amp;Intranet!"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%85%B6%E4%BB%96/osql&amp;Intranet!/" title="osql&amp;Intranet!">osql&amp;Intranet!</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-08T05:19:55.826Z" title="发表于 2022-11-08 13:19:55">2022-11-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%85%B6%E4%BB%96/">其他</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%85%B6%E4%BB%96/osql-Intranet/">osql&amp;Intranet!</a></span></div><div class="content">osql零过滤sql注入,也没有套娃  只不过数据库是oracl 其中简介是不要作弊意思 就是不要使用sqlmap去跑 这里就算你跑出来也是没有flag的  首先想教的就是拿到sql注入首先需要看看数据库类型 接着要去查看数据库版本 其次在id里有提示flag表里的内容是提示 所以不要说误导你 最后给的提示里面已经有答案了 

从题目可以看到有sql注入 并且题目名字是osql 所以 数据库可以猜测是oracle

这里进行尝试发现确实是oracle数据库 

看字段数 这里通过order by 可以发现 是3个字段 


这里从username 的名字也可以发现这里表的结构是 sqllibs的数据库表

其实这里就是一个提示信息 
这里尝试查看回显位 发现报错信息from关键字没有发现

直接查看sql官方语法

这里可以发现存在一个dual表, 当然这里如果你熟悉 sqllibs 的话会发现有一张users 的表 还有这里也可以知道有一张flag表,三个都可以去使用



尝试第一个dual 的时候发现存在数据类型不相同的问题

尝试flag发现表不存在




这里直接拿过来尝试 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E5%85%B6%E4%BB%96/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客搭建"><img class="post_bg" src="https://cdn.pixabay.com/photo/2015/10/30/20/13/sea-1014710_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客搭建"></a></div><div class="recent-post-info"><a class="article-title" href="/%E5%85%B6%E4%BB%96/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客搭建">博客搭建</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-25T13:39:26.055Z" title="发表于 2022-10-25 21:39:26">2022-10-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%85%B6%E4%BB%96/">其他</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E5%85%B6%E4%BB%96/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">博客搭建</a></span></div><div class="content">战队纳新SkyMirror是齐鲁工业大学的一只热爱网络安全的成员组成的战队.现在正在寻找小组成员中,欢迎来了解一下. 下面是我们第一年拿到的荣誉. 
2022ciscn   初赛全国第60名和第66名（赛区第7名和第9名） 复赛三等奖2022iscc   个人挑战赛&amp;无限擂台赛 每位成员均获双项一等奖2022网刃杯   全国第28名*CTF 2022   全球第66名2022强网杯   全国第69名第七届美亚杯中国电子取证大赛 团体赛   全国一等奖第七届美亚杯中国电子取证大赛 资格赛   全国一等奖第十四届全国大学生信息安全竞赛   全国三等奖大学生网络安全尖峰训练营   精英百强

附海报


各个成员的博客  https://www.wanan.red/link/     

前言并且本文除了 域名(可选) 腾讯云(一月一毛) 之外其他没有任何费用 也就是说完全可以做到零成本  选择腾讯云的原因是稳定 速度快 并且费用不高 
其次一定要注意的是中文符号问题 还有 yaml 文件的格式问题 一定要严格配置 如果报错请严格对比与我的差异
如果某一步出现了问题你发现上面配置错误 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%BA%8C)/" title="攻防世界(二)"><img class="post_bg" src="https://cdn.pixabay.com/photo/2014/11/15/23/31/alpsee-532864_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="攻防世界(二)"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%BA%8C)/" title="攻防世界(二)">攻防世界(二)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.656Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C/">攻防世界</a></span></div><div class="content">攻防世界upload扫目录

有几个配置文件

里面也发现不了什么东西,只能回到register页面
注册一个登进去,发现是一个上传目录的地方
小传一个,回显名称,文件链接呢

说是注入漏洞,我们之间select database()发现只剩下databse() select被替换为了空,那么我们先fuzz一下

这里直接双写绕过过滤
猜测它直接将我们上传的文件存入了数据库那可能通过文件进行sql注入？类似insert into 表名(‘filename’,…) values(‘上传的文件名’,…);这样
构造’ select database() ‘.jpg上传结果被过滤了
猜测是select或空格被过滤都改掉：双写select，空格用“+”构造’+(selselectect database())+’.jpg返回0
CONV()：进制的转换

CONV(N,from_base,to_base)select conv(16,10,16);+—————-+| conv(16,10,16) |+—————-+| 10 |+—————-+1 row in set (0.04 sec)


 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%B8%80)/" title="攻防世界(一)"><img class="post_bg" src="https://cdn.pixabay.com/photo/2016/04/20/19/47/wolves-1341881_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="攻防世界(一)"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%B8%80)/" title="攻防世界(一)">攻防世界(一)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.654Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C/">攻防世界</a></span></div><div class="content">利用linux目录结构特性引发的解析漏洞打开后获得源码开始审计
&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;cetc7&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;?phpsession_start();#开始记录sessionif (!isset($_GET[page])) &#123;#如果没有设置page的get参数就显示源码退出程序    show_source(__FILE__);    die();&#125;if (isset($_GET[page]) &amp;&amp; $_GET[page] != &#x27;index.php&#x27;) &#123;#如果设置了page参数并且get参数不等于index.php    include(&#x27;flag.php&#x27;);#就包含flag.php&#125;else &#123;    header(&# ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E9%9D%B6%E5%9C%BA/xctf2022/" title="XCTF"><img class="post_bg" src="https://cdn.pixabay.com/photo/2014/11/15/23/31/alpsee-532864_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XCTF"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/xctf2022/" title="XCTF">XCTF</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.651Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/XCTF/">XCTF</a></span></div><div class="content">oh-my-noteprohttp://an:5002/

python sqlmap.py -u http://an:5002/view?note_id=47zoj6lpuyr984tutahobu6zltm78ey7 --batch --cookie=&quot;session=eyJjc3JmX3Rva2VuIjoiZDdmMTA1MzY5OTg4NWUxYzQ3NDM0NGU3OWQyMDk2ZjYxNjE3YjEyYyIsInVzZXJuYW1lIjoiMSJ9.YmQBnw.ddR6hBXgEOkN00pVhdGK3uVgxEo&quot; --fresh-queries  -D ctf --tables

http://an:5002/view?note_id=47zoj6lpuyr984tutahobu6zltm78ey7&#x27;;-- + %0a create table wanan ( text VARCHAR(160) ); LOAD DATA LOCAL INFILE  &#x27;/etc/passwd&#x27; INTO TABLE ctf.wanan ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E9%9D%B6%E5%9C%BA/Upload%E9%9D%B6%E5%9C%BA/" title="Upload靶场"><img class="post_bg" src="https://cdn.pixabay.com/photo/2016/10/18/21/28/seljalandsfoss-1751463_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Upload靶场"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/Upload%E9%9D%B6%E5%9C%BA/" title="Upload靶场">Upload靶场</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.649Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/Upload%E9%9D%B6%E5%9C%BA/">Upload靶场</a></span></div><div class="content">upload靶场禁用前端js更改content-type类型($_FILES[&#x27;upload_file&#x27;][&#x27;type&#x27;] == &#x27;image/jpeg&#x27;) ||($_FILES[&#x27;upload_file&#x27;][&#x27;type&#x27;] == &#x27;image/png&#x27;

​    上传.php文件抓包修改content-type类型为:image&#x2F;jpeg、image&#x2F;png、image&#x2F;gif
上传未禁止类型$deny_ext = array(&#x27;.asp&#x27;,&#x27;.aspx&#x27;,&#x27;.php&#x27;,&#x27;.jsp&#x27;);

   jsp   jspx   jspf   asp   asa   cer   aspx   php   php3   php4   php5   phtml  

.htaccess文件绕过上传一个.htaccess文件名的文件内容为
SetHandler appl ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E9%9D%B6%E5%9C%BA/NSS/" title="NSSCTF"><img class="post_bg" src="https://cdn.pixabay.com/photo/2014/11/15/23/31/alpsee-532864_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NSSCTF"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/NSS/" title="NSSCTF">NSSCTF</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.645Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/NSSCTF/">NSSCTF</a></span></div><div class="content">[NISACTF 2022]babyupload

from flask import Flask, request, redirect, g, send_from_directoryimport sqlite3import osimport uuidapp = Flask(__name__)# 创建一个表名为files 值为id 和 path 内容为text 并且 含有primary keySCHEMA = &quot;&quot;&quot;CREATE TABLE files (id text primary key,path text);&quot;&quot;&quot;def db(): #返回g对象的_database属性值    g_db = getattr(g, &#x27;_database&#x27;, None)    if g_db is None:#如果存在        g_db = g._database = sqlite3.connect(&quot;database.db&quot;)#就连接databae.db    return g_db@app ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E9%9D%B6%E5%9C%BA/BUUCTF(%E5%9B%9B)%20/" title="BUUCTF(四)"><img class="post_bg" src="https://cdn.pixabay.com/photo/2018/01/12/14/24/night-3078326_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUUCTF(四)"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/BUUCTF(%E5%9B%9B)%20/" title="BUUCTF(四)">BUUCTF(四)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.643Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/BUUCTF/">BUUCTF</a></span></div><div class="content">[MRCTF2020]Ezaudit&lt;?phpheader(&#x27;Content-type:text/html; charset=utf-8&#x27;);error_reporting(0);if(isset($_POST[&#x27;login&#x27;]))&#123;    $username = $_POST[&#x27;username&#x27;];    $password = $_POST[&#x27;password&#x27;];    $Private_key = $_POST[&#x27;Private_key&#x27;];    if (($username == &#x27;&#x27;) || ($password == &#x27;&#x27;) ||($Private_key == &#x27;&#x27;)) &#123;        // 若为空,视为未填写,提示错误,并2秒后返回登录界面        header(&#x27;refresh:2; url=login.html&#x27;);        echo &quo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/%E9%9D%B6%E5%9C%BA/BUUCTF(%E4%BA%8C)%20/" title="BUUCTF(二)"><img class="post_bg" src="https://cdn.pixabay.com/photo/2017/07/19/01/41/clouds-2517653_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUUCTF(二)"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/BUUCTF(%E4%BA%8C)%20/" title="BUUCTF(二)">BUUCTF(二)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.640Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/BUUCTF/">BUUCTF</a></span></div><div class="content">双写绕过BUUCTF[极客大挑战 2019]BabySQL

好像和前面的题目相似

check.php?username=admin&amp;password=1&#x27;


单引号闭合
check.php?username=admin&amp;password=1&#x27; or &#x27;1&#x27;=&#x27;1


查一下字段数
check.php?username=admin&amp;password=1&#x27; union select 1,2,3,4 or &#x27;1&#x27;=&#x27;1


仔细看发现union select or都被过滤为空了,直接双写绕过
check.php?username=admin&amp;password=1&#x27; uniounionn sselectelect 1,2,3,4 oorr &#x27;1&#x27;=&#x27;1



check.php?username=admin&amp;password=1&#x27; uniounionn sselectelect 1,2,3 oorr &#x27 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/%E9%9D%B6%E5%9C%BA/BUUCTF(%E4%B8%89)/" title="BUUCTF(三)"><img class="post_bg" src="https://cdn.pixabay.com/photo/2015/10/30/20/13/sea-1014710_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUUCTF(三)"></a></div><div class="recent-post-info"><a class="article-title" href="/%E9%9D%B6%E5%9C%BA/BUUCTF(%E4%B8%89)/" title="BUUCTF(三)">BUUCTF(三)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-18T15:01:57.637Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/">靶场</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E9%9D%B6%E5%9C%BA/BUUCTF/">BUUCTF</a></span></div><div class="content">rc4模板注入
不知道啥意思,抓包看看

没东西,是不是要输入secret


尝试模板注入发现报错

因为我们是传的secret参数,所以我们之间搜索secret参数

import base64from urllib.parse import quotedef rc4_main(key = &quot;init_key&quot;, message = &quot;init_message&quot;):    # print(&quot;RC4加密主函数&quot;)    s_box = rc4_init_sbox(key)    crypt = str(rc4_excrypt(message, s_box))    return  cryptdef rc4_init_sbox(key):    s_box = list(range(256))  # 我这里没管秘钥小于256的情况，小于256不断重复填充即可    # print(&quot;原来的 s 盒：%s&quot; % s_box)    j = 0    for i in range(256):        j  ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/#content-inner">8</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://wanan-1310031509.cos.ap-beijing.myqcloud.com/img/202203092159138.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">wanan</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">73</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">56</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E5%85%B6%E4%BB%96/osql&amp;Intranet!/" title="osql&amp;Intranet!"><img src="https://cdn.pixabay.com/photo/2016/10/18/21/28/seljalandsfoss-1751463_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="osql&amp;Intranet!"/></a><div class="content"><a class="title" href="/%E5%85%B6%E4%BB%96/osql&amp;Intranet!/" title="osql&amp;Intranet!">osql&amp;Intranet!</a><time datetime="2022-11-08T05:19:55.826Z" title="发表于 2022-11-08 13:19:55">2022-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%85%B6%E4%BB%96/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客搭建"><img src="https://cdn.pixabay.com/photo/2015/10/30/20/13/sea-1014710_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客搭建"/></a><div class="content"><a class="title" href="/%E5%85%B6%E4%BB%96/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客搭建">博客搭建</a><time datetime="2022-10-25T13:39:26.055Z" title="发表于 2022-10-25 21:39:26">2022-10-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%BA%8C)/" title="攻防世界(二)"><img src="https://cdn.pixabay.com/photo/2014/11/15/23/31/alpsee-532864_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="攻防世界(二)"/></a><div class="content"><a class="title" href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%BA%8C)/" title="攻防世界(二)">攻防世界(二)</a><time datetime="2022-10-18T15:01:57.656Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%B8%80)/" title="攻防世界(一)"><img src="https://cdn.pixabay.com/photo/2016/04/20/19/47/wolves-1341881_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="攻防世界(一)"/></a><div class="content"><a class="title" href="/%E9%9D%B6%E5%9C%BA/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C(%E4%B8%80)/" title="攻防世界(一)">攻防世界(一)</a><time datetime="2022-10-18T15:01:57.654Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E9%9D%B6%E5%9C%BA/xctf2022/" title="XCTF"><img src="https://cdn.pixabay.com/photo/2014/11/15/23/31/alpsee-532864_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XCTF"/></a><div class="content"><a class="title" href="/%E9%9D%B6%E5%9C%BA/xctf2022/" title="XCTF">XCTF</a><time datetime="2022-10-18T15:01:57.651Z" title="发表于 2022-10-18 23:01:57">2022-10-18</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Crypto/"><span class="card-category-list-name">Crypto</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/GO/"><span class="card-category-list-name">GO</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">6</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/Linux%E5%AD%A6%E4%B9%A0-%E4%B8%80/"><span class="card-category-list-name">Linux学习(一)</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/Linux%E5%AD%A6%E4%B9%A0-%E4%B8%89/"><span class="card-category-list-name">Linux学习(三)</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/Linux%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"><span class="card-category-list-name">Linux学习(二)</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/Linux%E5%AD%A6%E4%B9%A0-%E4%BA%94/"><span class="card-category-list-name">Linux学习(五)</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/Linux%E5%AD%A6%E4%B9%A0-%E5%9B%9B/"><span class="card-category-list-name">Linux学习(四)</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/GO/" style="font-size: 1.15em; color: rgb(30, 57, 193)">GO</a><a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 1.22em; color: rgb(147, 94, 25)">编程语言</a><a href="/tags/leetCode/" style="font-size: 1.19em; color: rgb(85, 107, 97)">leetCode</a><a href="/tags/Linux/" style="font-size: 1.3em; color: rgb(71, 113, 55)">Linux</a><a href="/tags/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C/" style="font-size: 1.26em; color: rgb(60, 14, 5)">攻防世界</a><a href="/tags/CTF/" style="font-size: 1.45em; color: rgb(5, 156, 17)">CTF</a><a href="/tags/misc/" style="font-size: 1.15em; color: rgb(197, 137, 128)">misc</a><a href="/tags/Crypto/" style="font-size: 1.15em; color: rgb(53, 59, 118)">Crypto</a><a href="/tags/Python/" style="font-size: 1.26em; color: rgb(103, 113, 196)">Python</a><a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 1.19em; color: rgb(30, 31, 51)">框架</a><a href="/tags/flask/" style="font-size: 1.15em; color: rgb(112, 49, 100)">flask</a><a href="/tags/Django/" style="font-size: 1.15em; color: rgb(173, 63, 69)">Django</a><a href="/tags/%E8%8A%B1%E6%B4%BB/" style="font-size: 1.19em; color: rgb(140, 119, 76)">花活</a><a href="/tags/SQL/" style="font-size: 1.38em; color: rgb(111, 165, 25)">SQL</a><a href="/tags/slqilabs%E9%9D%B6%E5%9C%BA/" style="font-size: 1.34em; color: rgb(123, 79, 47)">slqilabs靶场</a><a href="/tags/XSS/" style="font-size: 1.19em; color: rgb(85, 65, 62)">XSS</a><a href="/tags/%E9%9D%B6%E5%9C%BA/" style="font-size: 1.22em; color: rgb(19, 17, 198)">靶场</a><a href="/tags/%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" style="font-size: 1.15em; color: rgb(1, 174, 167)">语言学习</a><a href="/tags/PHP/" style="font-size: 1.15em; color: rgb(198, 194, 67)">PHP</a><a href="/tags/java/" style="font-size: 1.26em; color: rgb(181, 192, 17)">java</a><a href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.19em; color: rgb(24, 125, 165)">框架学习</a><a href="/tags/ajax/" style="font-size: 1.15em; color: rgb(176, 98, 150)">ajax</a><a href="/tags/Docekr/" style="font-size: 1.15em; color: rgb(198, 193, 131)">Docekr</a><a href="/tags/GitHub/" style="font-size: 1.15em; color: rgb(103, 31, 172)">GitHub</a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.15em; color: rgb(92, 27, 39)">工具</a><a href="/tags/springboot/" style="font-size: 1.15em; color: rgb(179, 148, 188)">springboot</a><a href="/tags/SkyNICO/" style="font-size: 1.15em; color: rgb(89, 142, 197)">SkyNICO</a><a href="/tags/ctf-show/" style="font-size: 1.41em; color: rgb(6, 30, 96)">ctf.show</a><a href="/tags/CMS/" style="font-size: 1.15em; color: rgb(24, 85, 130)">CMS</a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.15em; color: rgb(199, 163, 154)">博客</a><a href="/tags/JWT/" style="font-size: 1.15em; color: rgb(38, 149, 7)">JWT</a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.15em; color: rgb(7, 168, 110)">面试</a><a href="/tags/SSRF/" style="font-size: 1.15em; color: rgb(160, 51, 57)">SSRF</a><a href="/tags/SSTI/" style="font-size: 1.15em; color: rgb(12, 43, 32)">SSTI</a><a href="/tags/XXE/" style="font-size: 1.15em; color: rgb(168, 172, 63)">XXE</a><a href="/tags/PHP%E7%89%B9%E6%80%A7/" style="font-size: 1.15em; color: rgb(191, 131, 148)">PHP特性</a><a href="/tags/phpCVE/" style="font-size: 1.15em; color: rgb(71, 163, 157)">phpCVE</a><a href="/tags/node-js/" style="font-size: 1.15em; color: rgb(174, 145, 150)">node.js</a><a href="/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" style="font-size: 1.15em; color: rgb(32, 81, 179)">代码审计</a><a href="/tags/%E4%B8%AD%E6%9C%9F%E6%B5%8B%E8%AF%84/" style="font-size: 1.15em; color: rgb(16, 115, 170)">中期测评</a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">73</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-06-09T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">319.9k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-11-08T10:09:23.576Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By wanan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=monsterid'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://valine.wanan.red'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'RjFSSKpeg1lxuvDjmLndzaLO-MdYXbMMI',
        "X-LC-Key": '8qrAyIwMaJTebKjjzPnV0SFT',
        "Content-Type": "application/json",
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 1/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>(function(d, w, c) {
    w.ChatraID = 'LAbfxFAsFCbvYgjHY';
    var s = d.createElement('script');
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
    };
    s.async = true;
    s.src = 'https://call.chatra.io/chatra.js';
    if (d.head) d.head.appendChild(s);
})(document, window, 'Chatra');

if (true) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      Chatra('openChat')
    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      Chatra('hide')
    }
    function chatBtnShow () {
      Chatra('show')
    }
  }
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>